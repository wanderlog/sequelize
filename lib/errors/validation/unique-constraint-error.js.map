{
  "version": 3,
  "sources": ["../../../src/errors/validation/unique-constraint-error.ts"],
  "sourcesContent": ["import { useErrorCause } from '../../utils/deprecations.js';\nimport type { CommonErrorProperties, SequelizeErrorOptions } from '../base-error';\nimport type { ValidationErrorItem } from '../validation-error';\nimport ValidationError from '../validation-error';\n\ninterface UniqueConstraintErrorParent extends Error, Pick<CommonErrorProperties, 'sql'> {}\n\nexport interface UniqueConstraintErrorOptions extends SequelizeErrorOptions {\n  cause?: UniqueConstraintErrorParent;\n\n  /**\n   * @deprecated use {@link UniqueConstraintErrorOptions.cause}\n   */\n  parent?: UniqueConstraintErrorParent;\n  errors?: ValidationErrorItem[];\n  fields?: Record<string, unknown>;\n  message?: string;\n}\n\n/**\n * Thrown when a unique constraint is violated in the database\n */\nclass UniqueConstraintError extends ValidationError implements CommonErrorProperties {\n  /** The database specific error which triggered this one */\n  declare cause: UniqueConstraintErrorParent | undefined;\n\n  readonly fields: Record<string, unknown>;\n  readonly sql: string;\n\n  constructor(options: UniqueConstraintErrorOptions = {}) {\n    if ('parent' in options) {\n      useErrorCause();\n    }\n\n    const parent = options.cause ?? options.parent ?? { sql: '', name: '', message: '' };\n    const message = options.message || parent.message || 'Validation Error';\n    const errors = options.errors ?? [];\n    super(message, errors, { stack: options.stack, cause: parent });\n\n    this.name = 'SequelizeUniqueConstraintError';\n    this.fields = options.fields ?? {};\n    this.sql = parent.sql;\n  }\n}\n\nexport default UniqueConstraintError;\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA8B;AAG9B,8BAA4B;AAmB5B,MAAM,8BAA8B,gCAAiD;AAAA,EAI1E;AAAA,EACA;AAAA,EAET,YAAY,UAAwC,CAAC,GAAG;AACtD,QAAI,YAAY,SAAS;AACvB,6CAAc;AAAA,IAChB;AAEA,UAAM,SAAS,QAAQ,SAAS,QAAQ,UAAU,EAAE,KAAK,IAAI,MAAM,IAAI,SAAS,GAAG;AACnF,UAAM,UAAU,QAAQ,WAAW,OAAO,WAAW;AACrD,UAAM,SAAS,QAAQ,UAAU,CAAC;AAClC,UAAM,SAAS,QAAQ,EAAE,OAAO,QAAQ,OAAO,OAAO,OAAO,CAAC;AAE9D,SAAK,OAAO;AACZ,SAAK,SAAS,QAAQ,UAAU,CAAC;AACjC,SAAK,MAAM,OAAO;AAAA,EACpB;AACF;AAEA,IAAO,kCAAQ;",
  "names": []
}
